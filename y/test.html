<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Dokumen Sederhana</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
        }
        table, th, td {
            border: 1px solid #d1d5db;
        }
        [contenteditable]:empty:before {
            content: attr(placeholder);
            color: #9ca3af;
        }
    </style>
</head>
<body class="p-4 sm:p-8 md:p-12">
    <div id="captureArea" class="max-w-4xl mx-auto bg-white p-6 sm:p-8 rounded-xl shadow-lg border border-gray-200">
        <!-- Tabel Informasi -->
        <div class="overflow-x-auto mb-6">
            <table class="min-w-full bg-white text-gray-800 border-collapse">
                <tbody>
                    <tr>
                        <td class="w-1/3 text-left py-3 px-4 font-semibold">Name</td>
                        <td class="w-2/3 text-left py-3 px-4">
                            <input type="text" class="w-full bg-transparent outline-none" placeholder="Masukkan Nama">
                        </td>
                    </tr>
                    <tr>
                        <td class="w-1/3 text-left py-3 px-4 font-semibold">Class</td>
                        <td class="w-2/3 text-left py-3 px-4">
                            <input type="text" class="w-full bg-transparent outline-none" placeholder="Masukkan Kelas">
                        </td>
                    </tr>
                    <tr>
                        <td class="w-1/3 text-left py-3 px-4 font-semibold">Student Number</td>
                        <td class="w-2/3 text-left py-3 px-4">
                            <input type="text" class="w-full bg-transparent outline-none" placeholder="Masukkan Nomor Induk">
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- Bagian Foto & Deskripsi -->
        <div class="p-4 sm:p-6 border-2 border-dashed border-gray-300 rounded-lg bg-gray-50 mb-4" id="photoContainer">
            <img id="previewImage" class="max-w-full h-auto rounded-lg mx-auto mb-4 hidden" alt="Foto Pratinjau">
            <div id="descriptionDiv" contenteditable="true" class="w-full h-auto min-h-[100px] p-2 text-sm border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 overflow-y-auto resize-y" placeholder="Tulis deskripsi di sini..."></div>
        </div>
    </div>

    <input type="file" id="fileInput" accept="image/*" class="hidden">
    
    <div class="flex flex-col sm:flex-row gap-4 max-w-4xl mx-auto mt-6">
        <button id="uploadButton" class="w-full py-2 px-4 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-blue-500">
            Unggah Foto
        </button>
        <button id="downloadDocumentButton" class="w-full py-2 px-4 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-300 focus:outline-none focus:ring-2 focus:ring-green-500">
            Unduh Dokumen
        </button>
    </div>

    <script>
        const uploadButton = document.getElementById('uploadButton');
        const fileInput = document.getElementById('fileInput');
        const previewImage = document.getElementById('previewImage');
        const placeholderText = document.getElementById('placeholderText');
        const descriptionDiv = document.getElementById('descriptionDiv');
        const downloadDocumentButton = document.getElementById('downloadDocumentButton');
        const captureArea = document.getElementById('captureArea');

        // Menggunakan CSS untuk placeholder pada div contenteditable
        // Ini lebih bersih daripada menggunakan JavaScript
        // Placeholder akan secara otomatis terlihat ketika div kosong

        uploadButton.addEventListener('click', () => {
            fileInput.click();
        });

        fileInput.addEventListener('change', (event) => {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (e) => {
                    previewImage.src = e.target.result;
                    previewImage.classList.remove('hidden');
                    placeholderText.classList.add('hidden');
                };
                reader.readAsDataURL(file);
            }
        });

        downloadDocumentButton.addEventListener('click', () => {
            if (previewImage.classList.contains('hidden') && descriptionDiv.textContent.trim() === '') {
                alert('Tolong unggah foto atau tulis deskripsi terlebih dahulu.');
                return;
            }

            // Sembunyikan placeholder sebelum capture
            const placeholderEl = document.querySelector('[contenteditable][placeholder]:empty:before');
            if (placeholderEl) {
                placeholderEl.style.display = 'none';
            }
            if (placeholderText.classList.contains('hidden') === false) {
                placeholderText.classList.add('hidden');
            }
            
            html2canvas(captureArea, {
                useCORS: true,
                scale: 2 
            }).then(canvas => {
                const a = document.createElement('a');
                a.href = canvas.toDataURL('image/png');
                a.download = 'dokumen_lengkap.png';
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);
                
                if (placeholderEl) {
                    placeholderEl.style.display = '';
                }
                if (previewImage.classList.contains('hidden')) {
                    placeholderText.classList.remove('hidden');
                }
            }).catch(err => {
                console.error('Error saat membuat canvas:', err);
                if (placeholderEl) {
                    placeholderEl.style.display = '';
                }
                if (previewImage.classList.contains('hidden')) {
                    placeholderText.classList.remove('hidden');
                }
            });
        });
    </script>
</body>
</html>

